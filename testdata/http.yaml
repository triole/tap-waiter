---
port: 17777

api:
  repos_unchanged.json:
    source: http://localhost/repos
    request_method: http_get
    return:
      created: true
      content: true
      unmarshal_content: true

  repos.json:
    source: http://localhost/repos
    request_method: http_get
    return:
      created: true
      content: true
      unmarshal_content: true
      json_path: "#.readme_url"
      regex_replace:
        - ["private", "public"]
        - ["/README.md", ""]

  meta.json:
    source: http://localhost:17777/repos.json
    request_method: http_get
    process:
      strategy: use_as_url_list
      request_method: http_get
      json_path: "#.content.body"
      regex_match:
        - "https?://[A-Za-z0-9\\/\\.\\-_:]+"
    return:
      content: true
      unmarshal_content: true
      json_path: "#.content.body"
